<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright 2009 Kantega AS
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config/>

  <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" id="urlMapping">

    <property name="alwaysUseFullPath">
      <value>true</value>
    </property>

    <property name="mappings">
      <props>
        <prop key="/">ContentRequestHandler</prop>
        <prop key="/content.ap">ContentRequestHandler</prop>
        <prop key="*.asp">ContentRequestHandler</prop>
        <prop key="/attachment.ap">AttachmentRequestHandler</prop>
        <prop key="/attachments/*">AttachmentRequestHandler</prop>
        <prop key="/multimedia.ap">MultimediaRequestHandler</prop>
        <prop key="/multimedia/*">MultimediaRequestHandler</prop>
        <prop key="/rss.ap">RssRequestHandler</prop>
        <prop key="/Login.action">LoginAction</prop>
        <prop key="/Logout.action">LogoutAction</prop>
        <prop key="/CreateInitialUser.action">CreateInitialUserAction</prop>
        <prop key="/admin/popups/AddAttachment.action">AddAttachmentAction</prop>
        <prop key="/admin/security/AddTopicRole.action">AddTopicRoleAction</prop>
        <prop key="/admin/security/AddContentRolePermission.action">AddContentRolePermissionAction</prop>
        <prop key="/admin/publish/AddContentTopic.action">AddContentTopicAction</prop>
        <prop key="/admin/publish/AddContent.action">AddContentAction</prop>
        <prop key="/admin/publish/ApproveOrReject.action">ApproveOrRejectAction</prop>
        <prop key="/admin/publish/CancelEdit.action">CancelEditAction</prop>
        <prop key="/admin/publish/ConfirmCopyPaste.action">ConfirmCopyPasteContentAction</prop>
        <prop key="/admin/multimedia/ConfirmCopyPaste.action">ConfirmCopyPasteMultimediaAction</prop>
        <prop key="/admin/publish/CopyPasteContent.action">CopyPasteContentAction</prop>
        <prop key="/admin/publish/CleanupHTML.action">CleanupHTMLAction</prop>
        <prop key="/admin/multimedia/CopyPasteMultimedia.action">CopyPasteMultimediaAction</prop>
        <prop key="/admin/sites/CreateRoot.action">createRootAction</prop>
        <prop key="/admin/publish/DeleteAttachment.action">DeleteAttachmentAction</prop>
        <prop key="/admin/publish/DeleteContentTopic.action">DeleteContentTopicAction</prop>
        <prop key="/admin/publish/SaveHearing.action">SaveHearingAction</prop>
        <prop key="/aksess/hearing/SaveHearingComment.action">SaveHearingCommentAction</prop>
        <prop key="/admin/publish/DeleteAssociation.action">DeleteAssociationAction</prop>
        <prop key="/admin/multimedia/DeleteMultimedia.action">DeleteMultimediaAction</prop>
        <prop key="/admin/topicmaps/DeleteTopic.action">DeleteTopicAction</prop>
        <prop key="/admin/topicmaps/admin/DeleteTopicMap.action">DeleteTopicMapAction</prop>
        <prop key="/admin/topicmaps/DeleteRoleTopic.action">DeleteRoleTopicAction</prop>
        <prop key="/admin/publish/DeleteVersion.action">DeleteVersionAction</prop>
        <prop key="/admin/publish/EditContent.action">EditContentAction</prop>
        <prop key="/admin/security/EditPermissions.action">EditPermissionsAction</prop>
        <prop key="/admin/security/RemovePermission.action">RemovePermissionAction</prop>
        <prop key="/admin/EndAdminMode.action">EndAdminModeAction</prop>
        <prop key="/admin/multimedia/ImageManipulation.action">ImageManipulationAction</prop>
        <prop key="/admin/multimedia/ImageMap.action">ImageMapAction</prop>
        <prop key="/PreviewContent.action">PreviewContentAction</prop>
        <prop key="/admin/publish/SaveAttachments.action">SaveAttachmentsAction</prop>
        <prop key="/admin/publish/SaveContent.action">SaveContentAction</prop>
        <prop key="/admin/publish/SaveEmpty.action">SaveEmptyAction</prop>
        <prop key="/admin/publish/SaveMetadata.action">SaveMetadataAction</prop>
        <prop key="/admin/publish/SaveNotes.action">SaveNotesAction</prop>
        <prop key="/admin/multimedia/SaveMultimedia.action">SaveMultimediaAction</prop>
        <prop key="/admin/security/SavePermissions.action">SavePermissionsAction</prop>
        <prop key="/admin/publish/SavePublishInfo.action">SavePublishInfoAction</prop>
        <prop key="/admin/publish/SaveVersionInfo.action">SaveVersionInfoAction</prop>
        <prop key="/admin/publish/SelectTemplate.action">SelectTemplateAction</prop>
        <prop key="/admin/publish/SimpleDeleteContent.action">SimpleDeleteContentAction</prop>
        <prop key="/admin/publish/SimpleEditContent.action">SimpleEditContentAction</prop>
        <prop key="/admin/publish/SimpleEditCancel.action">SimpleEditCancelAction</prop>
        <prop key="/admin/publish/SimpleEditSaveContent.action">SimpleEditSaveContentAction</prop>
        <prop key="/admin/topicmaps/UpdateTopic.action">UpdateTopicAction</prop>
        <prop key="/admin/publish/UseVersion.action">UseVersionAction</prop>
        <prop key="/admin/publish/RestoreDeletedItem.action">RestoreDeletedItemAction</prop>
        <prop key="/admin/LogJSError.action">LogJSErrorAction</prop>
        <prop key="/ajax/SearchContentAsXML.action">SearchContentAsXMLAction</prop>
        <prop key="/ajax/SearchFilenamesAsXML.action">SearchFilenamesAsXMLAction</prop>
        <prop key="/ajax/SearchMultimediaAsXML.action">SearchMultimediaAsXMLAction</prop>
        <prop key="/ajax/SearchOrgUnitsAsXML.action">SearchOrgUnitsAsXMLAction</prop>
        <prop key="/ajax/SearchUsersAsXML.action">SearchUsersAsXMLAction</prop>
        <prop key="/admin/publish/AddListOption.action">AddListOptionAction</prop>
        <prop key="/admin/publish/RemoveListOption.action">RemoveListOptionAction</prop>
        <prop key="/sitemap.xml">CrawlerSiteMapController</prop>
        <prop key="/robots.txt">RobotsController</prop>
        <prop key="/oap/static/**">PluginStaticContentController</prop>
      </props>
    </property>
  </bean>

    <bean class="no.kantega.publishing.spring.PluginDelegatingHandlerMapping">
        <property name="pluginManager" ref="pluginManager"/>
    </bean>

  <bean class="no.kantega.publishing.security.interceptors.AdminRoleInterceptor" id="adminRoleInterceptor"/>

  <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
      <property name="alwaysUseFullPath">
        <value>true</value>
      </property>
      <property name="interceptors">
          <list>
              <ref bean="adminRoleInterceptor"/>
          </list>
      </property>
      <property name="mappings">
        <props>
          <!-- Administrator controllers -->
          <prop key="/admin/locks/ListContentLocks.action">listContentLocksAction</prop>
          <prop key="/admin/locks/RemoveContentLock.action">removeContentLockAction</prop>
          <prop key="/admin/eventlog/SearchEventLog.action">searchEventLogAction</prop>
          <prop key="/admin/mailsubscription/ViewMailSubscribers.action">viewMailSubscribersAction</prop>
          <prop key="/admin/search/RebuildIndex.action">rebuildIndexController</prop>
          <prop key="/admin/searchlog/ViewSearchLog.action">viewSearchLogAction</prop>
          <prop key="/admin/contentexpiration/ListContentExpiration.action">listContentExpirationAction</prop>
          <prop key="/admin/userchanges/ListUserChanges.action">listUserChangesAction</prop>
          <prop key="/admin/topicmaps/admin/ListTopicMaps.action">listTopicMapsAction</prop>
          <prop key="/admin/topicmaps/admin/EditTopicMap.action">editTopicMapAction</prop>
          <!-- Site config controller -->
          <prop key="/admin/sites/ListSites.action">listSitesAction</prop>
          <prop key="/admin/sites/UpdateSite.action">updateSiteAction</prop>
          <!-- Display templateconfig controllers -->
          <prop key="/admin/templates/ListAssociationCategories.action">listAssociationCategoriesAction</prop>
          <prop key="/admin/templates/ListContentTemplates.action">listContentTemplatesAction</prop>
          <prop key="/admin/templates/ListDisplayTemplates.action">listDisplayTemplatesAction</prop>
          <prop key="/admin/templates/ListDisplayTemplateUsages.action">listDisplayTemplateUsagesAction</prop>
          <prop key="/admin/templates/ReloadTemplateConfiguration.action">reloadTemplateConfigurationAction</prop>
        </props>
      </property>
    </bean>

  <bean class="no.kantega.publishing.client.ContentRequestHandler" id="ContentRequestHandler"/>

    <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="MultimediaRequestHandler">
    <property name="servletClass">
      <value>no.kantega.publishing.client.MultimediaRequestHandler</value>
    </property>
    <property name="servletName">
      <value>MultimediaRequestHandler</value>
    </property>
  </bean>
  <bean id="RssRequestHandler" class="no.kantega.publishing.client.RssRequestHandler">
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="AttachmentRequestHandler">
    <property name="servletClass">
      <value>no.kantega.publishing.client.AttachmentRequestHandler</value>
    </property>
    <property name="servletName">
      <value>AttachmentRequestHandler</value>
    </property>
  </bean>
  <bean class="no.kantega.publishing.security.action.LoginAction" id="LoginAction">
      <property name="loginView">
        <value>${security.login.view}</value>
      </property>
      <property name="userLoginRestrictor">
          <bean class="no.kantega.publishing.security.data.PauseLoginRestrictor">
              <property name="maxAttempts" value="5"/>
              <property name="timeoutInSeconds" value="900"/>
          </bean>
      </property>
      <property name="ipLoginRestrictor">
          <bean class="no.kantega.publishing.security.data.PauseLoginRestrictor">
              <property name="maxAttempts" value="50"/>
              <property name="timeoutInSeconds" value="3600"/>
          </bean>
      </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="LogoutAction">
    <property name="servletClass">
      <value>no.kantega.publishing.security.action.LogoutAction</value>
    </property>
    <property name="servletName">
      <value>LogoutAction</value>
    </property>
  </bean>
  <bean class="no.kantega.useradmin.controls.CreateInitialUserController" id="CreateInitialUserAction">
    <property name="defaultDomain">
      <value>${security.defaultdomain}</value>
    </property>
    <property name="profileConfiguration" ref="profileConfigurations"/>
    <property name="roleConfiguration" ref="roleConfigurations"/>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="AddAttachmentAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.AddAttachmentAction</value>
    </property>
    <property name="servletName">
      <value>AddAttachmentAction</value>
    </property>
  </bean>
  <bean class="no.kantega.publishing.admin.content.action.AddContentAction" id="AddContentAction">
       <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
  </bean>
  <bean class="no.kantega.publishing.admin.content.action.AddContentRolePermissionAction" id="AddContentRolePermissionAction"/>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="AddContentTopicAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.AddContentTopicAction</value>
    </property>
    <property name="servletName">
      <value>AddContentTopicAction</value>
    </property>
  </bean>
    <bean class="no.kantega.publishing.admin.content.action.AddTopicRoleAction" id="AddTopicRoleAction"/>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="ApproveOrRejectAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.ApproveOrRejectAction</value>
    </property>
    <property name="servletName">
      <value>ApproveOrRejectAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="CancelEditAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.CancelEditAction</value>
    </property>
    <property name="servletName">
      <value>CancelEditAction</value>
    </property>
  </bean>
  <bean class="no.kantega.publishing.admin.content.action.CleanupHTMLAction" id="CleanupHTMLAction"/>
  <bean class="no.kantega.publishing.admin.content.action.ConfirmCopyPasteContentAction" id="ConfirmCopyPasteContentAction">
      <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
  </bean>
  <bean class="no.kantega.publishing.admin.multimedia.action.ConfirmCopyPasteMultimediaAction" id="ConfirmCopyPasteMultimediaAction"/>
  <bean class="no.kantega.publishing.admin.content.action.CopyPasteContentAction" id="CopyPasteContentAction"/>
  <bean class="no.kantega.publishing.admin.multimedia.action.CopyPasteMultimediaAction" id="CopyPasteMultimediaAction"/>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteAttachmentAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.DeleteAttachmentAction</value>
    </property>
    <property name="servletName">
      <value>DeleteAttachmentAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteContentTopicAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.DeleteContentTopicAction</value>
    </property>
    <property name="servletName">
      <value>DeleteContentTopicAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteMultimediaAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.multimedia.action.DeleteMultimediaAction</value>
    </property>
    <property name="servletName">
      <value>DeleteMultimediaAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteTopicAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.topicmaps.action.DeleteTopicAction</value>
    </property>
    <property name="servletName">
      <value>DeleteTopicAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteTopicMapAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.topicmaps.action.DeleteTopicMapAction</value>
    </property>
    <property name="servletName">
      <value>DeleteTopicMapAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteRoleTopicAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.DeleteRoleTopicAction</value>
    </property>
    <property name="servletName">
      <value>DeleteRoleTopicAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteAssociationAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.DeleteAssociationAction</value>
    </property>
    <property name="servletName">
      <value>DeleteAssociationAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="DeleteVersionAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.DeleteVersionAction</value>
    </property>
    <property name="servletName">
      <value>DeleteVersionAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="EditContentAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.EditContentAction</value>
    </property>
    <property name="servletName">
      <value>EditContentAction</value>
    </property>
  </bean>
  <bean class="no.kantega.publishing.admin.content.action.EditPermissionsAction" id="EditPermissionsAction"/>
  <bean class="no.kantega.publishing.admin.content.action.RemovePermissionAction" id="RemovePermissionAction"/>
  <bean class="no.kantega.publishing.admin.content.action.EndAdminModeAction" id="EndAdminModeAction"/>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="ImageManipulationAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.multimedia.action.ImageManipulationAction</value>
    </property>
    <property name="servletName">
      <value>ImageManipulationAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="ImageMapAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.multimedia.action.ImageMapAction</value>
    </property>
    <property name="servletName">
      <value>ImageMapAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="PreviewContentAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.PreviewContentAction</value>
    </property>
    <property name="servletName">
      <value>PreviewContentAction</value>
    </property>
  </bean>

  <bean class="no.kantega.publishing.admin.content.action.SimpleDeleteContentAction" id="SimpleDeleteContentAction"/>
  <bean class="no.kantega.publishing.admin.content.action.SimpleEditContentAction" id="SimpleEditContentAction"/>
  <bean class="no.kantega.publishing.admin.content.action.SimpleEditSaveContentAction" id="SimpleEditSaveContentAction"/>
  <bean class="no.kantega.publishing.admin.content.action.SimpleEditCancelAction" id="SimpleEditCancelAction"/>
  <bean class="no.kantega.publishing.admin.content.action.RestoreDeletedItemAction" id="RestoreDeletedItemAction"/>

  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveAttachmentsAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveAttachmentsAction</value>
    </property>
    <property name="servletName">
      <value>SaveAttachmentsAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveContentAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveContentAction</value>
    </property>
    <property name="servletName">
      <value>SaveContentAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveEmptyAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveEmptyAction</value>
    </property>
    <property name="servletName">
      <value>SaveEmptyAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveMetadataAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveMetadataAction</value>
    </property>
    <property name="servletName">
      <value>SaveMetadataAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveNotesAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveNotesAction</value>
    </property>
    <property name="servletName">
      <value>SaveNotesAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveMultimediaAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.multimedia.action.SaveMultimediaAction</value>
    </property>
    <property name="servletName">
      <value>SaveMultimediaAction</value>
    </property>
  </bean>

  <bean class="no.kantega.publishing.admin.content.action.SavePermissionsAction" id="SavePermissionsAction"/>
    
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SavePublishInfoAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SavePublishInfoAction</value>
    </property>
    <property name="servletName">
      <value>SavePublishInfoAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveVersionInfoAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveVersionInfoAction</value>
    </property>
    <property name="servletName">
      <value>SaveVersionInfoAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SelectTemplateAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SelectTemplateAction</value>
    </property>
    <property name="servletName">
      <value>SelectTemplateAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="UpdateTopicAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.topicmaps.action.UpdateTopicAction</value>
    </property>
    <property name="servletName">
      <value>UpdateTopicAction</value>
    </property>
  </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveHearingAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.SaveHearingAction</value>
    </property>
    <property name="servletName">
      <value>SaveHearingAction</value>
    </property>
  </bean>
    <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="SaveHearingCommentAction">
      <property name="servletClass">
        <value>no.kantega.publishing.admin.content.action.SaveHearingCommentAction</value>
      </property>
      <property name="servletName">
        <value>SaveHearingAction</value>
      </property>
    </bean>
  <bean class="org.springframework.web.servlet.mvc.ServletWrappingController" id="UseVersionAction">
    <property name="servletClass">
      <value>no.kantega.publishing.admin.content.action.UseVersionAction</value>
    </property>
    <property name="servletName">
      <value>UseVersionAction</value>
    </property>
  </bean>

  <!-- Administrator controllers -->
  <bean class="no.kantega.publishing.admin.content.action.ListContentLocksAction" id="listContentLocksAction"/>
  <bean class="no.kantega.publishing.admin.content.action.RemoveContentLockAction" id="removeContentLockAction"/>
  <bean class="no.kantega.publishing.admin.eventlog.action.SearchEventLogAction" id="searchEventLogAction"/>
  <bean class="no.kantega.publishing.admin.mailsubscriptions.action.ViewMailSubscribersAction" id="viewMailSubscribersAction"/>
  <bean id="rebuildIndexController" class="no.kantega.publishing.search.web.control.RebuildIndexController">
    <property name="indexManager">
      <ref bean="indexManager"/>
    </property>
    <property name="indexSearcherManager">
      <ref bean="indexSearcherManager"/>
    </property>
  </bean>
  <bean class="no.kantega.publishing.admin.searchlog.action.ViewSearchLogAction" id="viewSearchLogAction">
      <property name="siteCache" ref="aksessSiteCache"/>
  </bean>
  <bean class="no.kantega.publishing.admin.content.action.ListUserChangesAction" id="listUserChangesAction"/>
  <bean class="no.kantega.publishing.admin.content.action.ListContentExpirationAction" id="listContentExpirationAction"/>
  <bean class="no.kantega.publishing.admin.topicmaps.action.EditTopicMapAction" id="editTopicMapAction"/>
  <bean class="no.kantega.publishing.admin.topicmaps.action.ListTopicMapsAction" id="listTopicMapsAction"/>

  <!-- Site config -->
  <bean class="no.kantega.publishing.admin.sites.action.ListSitesAction" id="listSitesAction">
     <property name="siteCache" ref="aksessSiteCache"/>
  </bean>
  <bean class="no.kantega.publishing.admin.sites.action.UpdateSiteAction" id="updateSiteAction"/>
  <bean class="no.kantega.publishing.admin.sites.action.CreateRootAction" id="createRootAction">
     <property name="siteCache" ref="aksessSiteCache"/>
  </bean>

  <!-- Template config -->
  <bean class="no.kantega.publishing.admin.templateconfiguration.action.ListAssociationCategoriesAction" id="listAssociationCategoriesAction">
    <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
  </bean>

  <bean class="no.kantega.publishing.admin.templateconfiguration.action.ListContentTemplatesAction" id="listContentTemplatesAction">
    <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
  </bean>

  <bean class="no.kantega.publishing.admin.templateconfiguration.action.ListDisplayTemplatesAction" id="listDisplayTemplatesAction">
    <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
  </bean>

  <bean class="no.kantega.publishing.admin.templateconfiguration.action.ListDisplayTemplateUsagesAction" id="listDisplayTemplateUsagesAction"/>

  <bean class="no.kantega.publishing.admin.templateconfiguration.action.ReloadTemplateConfigurationAction" id="reloadTemplateConfigurationAction">
    <property name="templateConfigurationFactory" ref="aksessTemplateConfigurationFactory"/>
    <property name="templateConfigurationValidator" ref="aksessTemplateConfigurationValidator"/>
    <property name="templateConfigurationCache" ref="aksessTemplateConfigurationCache"/>
    <property name="templateValidator" ref="aksessTemplateValidator"/>
  </bean>

  <!-- Various -->
  <bean class="no.kantega.publishing.admin.log.action.LogJSErrorAction" id="LogJSErrorAction"/>
  <bean class="no.kantega.publishing.admin.ajax.SearchContentAsXMLAction" id="SearchContentAsXMLAction">
      <property name="siteCache" ref="aksessSiteCache"/>
  </bean>
  <bean class="no.kantega.publishing.admin.ajax.SearchFilenamesAsXMLAction" id="SearchFilenamesAsXMLAction"/>
  <bean class="no.kantega.publishing.admin.ajax.SearchMultimediaAsXMLAction" id="SearchMultimediaAsXMLAction"/>
  <bean class="no.kantega.publishing.admin.ajax.SearchOrgUnitsAsXMLAction" id="SearchOrgUnitsAsXMLAction"/>
  <bean class="no.kantega.publishing.admin.ajax.SearchUsersAsXMLAction" id="SearchUsersAsXMLAction"/>

  <bean class="no.kantega.publishing.admin.attributes.action.AddListOptionAction" id="AddListOptionAction"/>
  <bean class="no.kantega.publishing.admin.attributes.action.RemoveListOptionAction" id="RemoveListOptionAction"/>


    <bean id="PluginStaticContentController" class="no.kantega.publishing.spring.PluginStaticContentController">
        <property name="pluginManager" ref="pluginManager"/>
    </bean>

    <bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
        <property name="resourceLoaderPath" value="classpath:"/>
        <property name="velocityProperties">
            <value>
                userdirective=no.kantega.publishing.velocity.SectionDirective,no.kantega.publishing.velocity.DispatchDirective
            </value>
        </property>
    </bean>
    <bean id="velocityViewResolver" class="no.kantega.publishing.spring.ChainableVelocityViewResolver">
        <property name="cache" value="true"/>
        <property name="prefix" value=""/>
        <property name="suffix" value=".vm"/>
    </bean>
    
  <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"><value>org.springframework.web.servlet.view.JstlView</value></property>
  </bean>

  <bean class="no.kantega.publishing.controls.sitemap.CrawlerSiteMapController" id="CrawlerSiteMapController"/>


  <bean class="no.kantega.publishing.controls.robots.RobotsController" id="RobotsController"/>

  <bean class="no.kantega.publishing.spring.PropertyReplacer"/>
</beans>
