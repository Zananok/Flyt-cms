<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <bean id="aksessFormElementValidatorFactory" class="no.kantega.publishing.modules.forms.validate.FormElementValidatorFactory">
        <property name="formElementValidators">
            <list>
                <bean class="no.kantega.publishing.modules.forms.validate.FormElementEmailValidator"/>
                <bean class="no.kantega.publishing.modules.forms.validate.FormElementNumberValidator"/>
                <bean class="no.kantega.publishing.modules.forms.validate.FormElementNorwegianSsnValidator"/>
                <bean class="no.kantega.publishing.modules.forms.validate.FormElementRegExValidator"/>
            </list>
        </property>
    </bean>

    <bean id="aksessDatabaseFormSubmissionDao" class="no.kantega.openaksess.forms.database.dao.DatabaseFormSubmissionDao">
        <property name="dataSource" ref="aksessDataSource"/>
    </bean>

    <bean id="aksessContentFormService" class="no.kantega.publishing.modules.forms.service.AksessContentFormService"/>

    <bean id="aksessFormSubmissionValidator" class="no.kantega.publishing.modules.forms.validate.DefaultFormSubmissionValidator">
        <property name="formElementValidatorFactory" ref="aksessFormElementValidatorFactory"/>
    </bean>
    
    <bean id="aksessFilledFormBuilder" class="no.kantega.publishing.modules.forms.util.DefaultFilledFormBuilder"/>

    <bean id="aksessFormSubmissionBuilder" class="no.kantega.publishing.modules.forms.util.DefaultFormSubmissionBuilder"/>

    <bean id="aksessSaveFormSubmissionController" class="no.kantega.publishing.modules.forms.control.SaveFormSubmissionController">
        <property name="description" value="Collects data from form, validates data and sends to delivery service"/>
        <property name="formDeliveryServiceIds" value="${forms.deliveryservices}"/>
        <property name="pluginManager" ref="pluginManager"/>
        <property name="formSubmissionValidator" ref="aksessFormSubmissionValidator"/>
        <property name="filledFormBuilder" ref="aksessFilledFormBuilder"/>
        <property name="formSubmissionBuilder" ref="aksessFormSubmissionBuilder"/>
    </bean>
</beans>