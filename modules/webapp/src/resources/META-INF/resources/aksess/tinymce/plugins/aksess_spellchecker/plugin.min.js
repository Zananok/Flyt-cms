/**
 * Created by rubfag on 26.06.2015.
 */

tinymce.PluginManager.add('aksess_spellchecker', function(editor, url){

    var active = false;

    function spellcheck(){
        //active = !active;
        editor.getBody().spellcheck = active = !active;//active;
        console.log("spellcheck?: "+ editor.getBody().spellcheck);
        if(active){
            editor.contextmenu = false;
        }
    }

    editor.addMenuItem('aksess_spellchecker', {
        text: 'Spellcheck',
        icon: 'Spellcheck',
        context: 'tools',
        onclick: spellcheck,
        selectable: true/*,
        onPostRender: function() {
            var self = this;

            self.active(started);

            editor.on('SpellcheckStart SpellcheckEnd', function() {
                self.active(started);
            });
        }*/
    });

    editor.addButton('aksess_spellchecker', {
        tooltip: 'Spellcheck',
        icon: 'Spellcheck',
        onclick: spellcheck/*,
        onPostRender: function() {
            var self = this;

            editor.on('SpellcheckStart SpellcheckEnd', function() {
                self.active(started);
            });
        }*/
    });
    editor.addCommand('mceSpellCheck', spellcheck);

    //editor.on('remove', function() {
    //    if (suggestionsMenu) {
    //        suggestionsMenu.remove();
    //        suggestionsMenu = null;
    //    }
    //});

    //editor.on('change', checkIfFinished);

});